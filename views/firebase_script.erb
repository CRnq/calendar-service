<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCWfwz6NME73dQKXUzPbzYHn88gEALyuRE",
    authDomain: "smart-calendar-d43a6.firebaseapp.com",
    projectId: "smart-calendar-d43a6",
    storageBucket: "smart-calendar-d43a6.firebasestorage.app",
    messagingSenderId: "780875079505",
    appId: "1:780875079505:web:db9c46d196fa80b7c87d70",
    measurementId: "G-ZDTKN31PWW"
  };

  firebase.initializeApp(firebaseConfig);

  function signInWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();
    firebase.auth().signInWithPopup(provider)
      .then(result => result.user.getIdToken())
      .then(idToken => {
        return fetch('/login/google', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ idToken: idToken })
        });
      })
      .then(response => response.text())
      .then(message => {
        alert(message);
        window.location.href = '/';
      });
  }
</script>
